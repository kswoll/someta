<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /Someta.Docs/ExtensionPoints/InstanceInitializers.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->

# Initializer Extension Points

Someta allows you to inject behavior into the constructor of a target class.  We provide two interfaces, one to add behavior at the start of the constructor and the other to add behavior at the end.  Sometimes you may want to wait for the constructor of the target class to complete before adding your own logic.  For that use `IInstanceInitializer`.  At other times, you may want to instantiate some state (through `InjectedField<T>`) and initialize it before the constructor of the target class starts so as to make available behavior within the constructor itself.

## [IInstanceInitializer](/Someta/IInstanceInitializer.cs)

This interface has one method:

<!-- snippet: InstanceInitializer -->
<a id='snippet-instanceinitializer'></a>
```cs
void Initialize(object instance, MemberInfo member);
```
<sup><a href='/Someta/IInstanceInitializer.cs#L19-L21' title='Snippet source file'>snippet source</a> | <a href='#snippet-instanceinitializer' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

### Example

<!-- snippet: InstanceInitializerExample -->
<a id='snippet-instanceinitializerexample'></a>
```cs
public void InitializerExample()
{
    var testClass = new InitializerTestClass();
    Console.WriteLine(testClass.Value);         // Prints 1
}

[InitializerExtensionPoint]
class InitializerTestClass
{
    public int Value { get; set; }
}

class InitializerExtensionPoint : Attribute, IInstanceInitializer
{
    public void Initialize(object instance, MemberInfo member)
    {
        ((InitializerTestClass)instance).Value++;
    }
}
```
<sup><a href='/Someta.Docs/Samples/InstanceInitializerExample.cs#L15-L35' title='Snippet source file'>snippet source</a> | <a href='#snippet-instanceinitializerexample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

## [IInstancePreinitializer](/Someta/IInstancePreinitializer.cs)

This interface has one method:

<!-- snippet: MethodInterceptor -->
<a id='snippet-methodinterceptor'></a>
```cs
object Invoke(MethodInfo methodInfo, object instance, Type[] typeArguments, object[] arguments, Func<object[], object> invoker);
```
<sup><a href='/Someta/IMethodInterceptor.cs#L26-L28' title='Snippet source file'>snippet source</a> | <a href='#snippet-methodinterceptor' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

### Example

<!-- snippet: InstancePreinitializerExample -->
<a id='snippet-instancepreinitializerexample'></a>
```cs
public void PreinitializerExample()
{
    var testClass = new PreinitializerTestClass();
    Console.WriteLine(testClass.ValueAsSeenInConstructor);         // Prints 1
}

[PreinitializerExtensionPoint]
class PreinitializerTestClass
{
    public int Value { get; set; }
    public int ValueAsSeenInConstructor { get; set; }

    public PreinitializerTestClass()
    {
        ValueAsSeenInConstructor = Value;
    }
}

class PreinitializerExtensionPoint : Attribute, IInstancePreinitializer
{
    public void Preinitialize(object instance, MemberInfo member)
    {
        ((PreinitializerTestClass)instance).Value = 1;
    }
}
```
<sup><a href='/Someta.Docs/Samples/InstancePreinitializerExample.cs#L10-L36' title='Snippet source file'>snippet source</a> | <a href='#snippet-instancepreinitializerexample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->
