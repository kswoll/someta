<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /Someta.Docs/Samples/Unnullable.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->

# Unnullable

While working on a Blazor website, I found I had a situation where I wanted to bind properties to parameters (as one does in Blazor) but wanted to make it so that the value of the property can never be set to null. If a null value were to be passed, I wanted to ignore it and allow the property to retain its old value. (this was due to a complex page that handled a number of different routes, so some of the bound properties would only be bound to a real value for certain routes. so when navigating to some of the other routes, those properties would be set to null. I wanted to retain those values so that when navigating back the route values wouldn't be lost) This turned out to be a perfect use case for Someta:

<!-- snippet: Unnullable -->
<a id='snippet-unnullable'></a>
```cs
[AttributeUsage(AttributeTargets.Property)]
public class UnnullableAttribute : Attribute, IPropertySetInterceptor
{
    public void SetPropertyValue(PropertyInfo propertyInfo, object instance, object oldValue, object newValue, Action<object> setter)
    {
        if (newValue != null)
            setter(newValue);
    }
}
```
<sup><a href='/Someta.Docs/Source/Samples/UnnullableAttribute.cs#L5-L15' title='Snippet source file'>snippet source</a> | <a href='#snippet-unnullable' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Usage:

<!-- snippet: UnnullableExample -->
<a id='snippet-unnullableexample'></a>
```cs
public void UnnullableExample()
{
    var testClass = new TestClass();

    testClass.Value.ShouldBeNull();
    testClass.Value = "foo";
    testClass.Value.ShouldBe("foo");
    testClass.Value = null;
    testClass.Value.ShouldBe("foo");
}

public class TestClass
{
    [Unnullable]
    public string? Value { get; set; }
}
```
<sup><a href='/Someta.Docs/Tests/Samples/UnnullableTests.cs#L11-L28' title='Snippet source file'>snippet source</a> | <a href='#snippet-unnullableexample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->
